spring:
  main:
    web-application-type: none

zrivot:
  pipeline:
    mode: REALTIME  # REALTIME or OFFLINE
  kafka:
    bootstrap-servers: localhost:9092
    raw-topic: raw-clients
    output-topic: enriched-clients
  elasticsearch:
    hosts:
      - http://localhost:9200
    index: clients
    username: ""
    password: ""
    connect-timeout-ms: 5000
    socket-timeout-ms: 30000
  joiner:
    timeout-ms: 30000
  reflow:
    slice-threshold: 10000
    max-slices: 10
    fetch-batch-size: 1000
    sort-field: startTime  # sort by this field DESC then _id ASC; omit for _id-only sort
  enrichers:
    - name: client-geo-enricher
      consumer-group: client-geo-enricher-group          # not required in OFFLINE mode
      reflow-enabled: true
      reflow-topic: reflow-client-geo
      reflow-consumer-group: reflow-client-geo-group
      class-name: com.zrivot.enrichment.ApiEnricher
      bulk-enabled: false
      bulk-size: 10
      retry-delay-ms: 5000
      max-retries: 3
      properties:
        apiUrl: http://geo-service:8080/enrich
        bulkApiUrl: http://geo-service:8080/enrich/bulk
        timeoutMs: "5000"
    - name: client-identity-enricher
      consumer-group: client-identity-enricher-group     # not required in OFFLINE mode
      reflow-enabled: false
      class-name: com.zrivot.enrichment.ApiEnricher
      bulk-enabled: true
      bulk-size: 15
      retry-delay-ms: 5000
      max-retries: 3
      properties:
        apiUrl: http://identity-service:8080/enrich
        bulkApiUrl: http://identity-service:8080/enrich/bulk
        timeoutMs: "5000"
